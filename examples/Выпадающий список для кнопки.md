&НаКлиенте
Процедура ФильтрПоЛиниямНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	СтандартнаяОбработка	= Ложь;
	СписокЛиний				= ПолучитьСписокЛиний();
	ВыбранноеЗначение		= ВыбратьИзМеню(СписокЛиний, Элементы.ФильтрПоЛиниям);
	ФильтрПоЛиниям			= ВыбранноеЗначение;	
КонецПроцедуры

&НаСервереБезКонтекста
Функция ПолучитьСписокЛиний()
	Запрос = Новый запрос;
	Запрос.Текст = "ВЫБРАТЬ
	               |	Линия.Наименование Как Наименование
	               |ИЗ
	               |	Справочник.Линия КАК Линия"; 
	Выборка		= Запрос.Выполнить().Выбрать();
	СписокЛиний	= Новый СписокЗначений;
	
	СписокЛиний.Добавить("Все линии");
	
	Пока Выборка.Следующий() Цикл
		СписокЛиний.Добавить(Выборка.Наименование);
	КонецЦикла; 
	
	Возврат СписокЛиний;				   
КонецФункции
